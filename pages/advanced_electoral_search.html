<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recherche Avancée - Archives Électorales Sénégal</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Felectoral1443back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Header Navigation -->
    <header class="bg-surface shadow-card border-b border-border">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="h-10 w-10 text-primary" viewBox="0 0 40 40" fill="currentColor">
                            <rect x="2" y="8" width="36" height="24" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                            <rect x="6" y="12" width="8" height="4" fill="currentColor"/>
                            <rect x="16" y="12" width="8" height="4" fill="currentColor"/>
                            <rect x="26" y="12" width="8" height="4" fill="currentColor"/>
                            <rect x="6" y="18" width="28" height="2" fill="currentColor"/>
                            <rect x="6" y="22" width="20" height="2" fill="currentColor"/>
                            <circle cx="32" cy="23" r="2" fill="currentColor"/>
                        </svg>
                    </div>
                    <div class="ml-3">
                        <h1 class="text-xl font-heading font-bold text-textPrimary">Archives Électorales</h1>
                        <p class="text-sm text-textSecondary">République du Sénégal</p>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="hidden md:flex space-x-8">
                    <a href="electoral_data_dashboard.html" class="text-textSecondary hover:text-primary transition-micro">Tableau de Bord</a>
                    <a href="advanced_electoral_search.html" class="text-primary font-semibold border-b-2 border-primary pb-1">Recherche Avancée</a>
                    <a href="election_results_detail.html" class="text-textSecondary hover:text-primary transition-micro">Résultats</a>
                    <a href="candidate_profile.html" class="text-textSecondary hover:text-primary transition-micro">Candidats</a>
                    <a href="electoral_map_viewer.html" class="text-textSecondary hover:text-primary transition-micro">Carte Électorale</a>
                </nav>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button type="button" class="text-textSecondary hover:text-primary p-2" onclick="toggleMobileMenu()">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Navigation -->
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <div class="space-y-2">
                    <a href="electoral_data_dashboard.html" class="block px-3 py-2 text-textSecondary hover:text-primary hover:bg-gray-50 rounded-md transition-micro">Tableau de Bord</a>
                    <a href="advanced_electoral_search.html" class="block px-3 py-2 text-primary font-semibold bg-primary-50 rounded-md">Recherche Avancée</a>
                    <a href="election_results_detail.html" class="block px-3 py-2 text-textSecondary hover:text-primary hover:bg-gray-50 rounded-md transition-micro">Résultats</a>
                    <a href="candidate_profile.html" class="block px-3 py-2 text-textSecondary hover:text-primary hover:bg-gray-50 rounded-md transition-micro">Candidats</a>
                    <a href="electoral_map_viewer.html" class="block px-3 py-2 text-textSecondary hover:text-primary hover:bg-gray-50 rounded-md transition-micro">Carte Électorale</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Breadcrumb -->
        <nav class="breadcrumb mb-6">
            <a href="electoral_data_dashboard.html">Accueil</a>
            <span>/</span>
            <span class="text-textPrimary">Recherche Avancée</span>
        </nav>

        <!-- Page Header -->
        <div class="mb-8">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                <div>
                    <h2 class="text-3xl font-heading font-bold text-textPrimary mb-2">Recherche Avancée</h2>
                    <p class="text-textSecondary">Recherchez dans les archives électorales avec des critères précis</p>
                </div>
                <div class="mt-4 sm:mt-0 flex space-x-3">
                    <button class="btn-secondary flex items-center" onclick="clearAllFilters()">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                        </svg>
                        Réinitialiser
                    </button>
                    <button class="btn-primary flex items-center" onclick="saveSearch()">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
                        </svg>
                        Sauvegarder
                    </button>
                </div>
            </div>
        </div>

        <!-- Applied Filters Tags -->
        <div id="applied-filters" class="mb-6 hidden">
            <div class="flex flex-wrap items-center gap-2">
                <span class="text-sm font-medium text-textSecondary">Filtres appliqués:</span>
                <div id="filter-tags" class="flex flex-wrap gap-2"></div>
                <button onclick="clearAllFilters()" class="text-sm text-accent hover:text-accent-700 ml-2">Tout effacer</button>
            </div>
        </div>

        <!-- Search Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Filters Sidebar -->
            <div class="lg:col-span-1">
                <div class="card p-6 sticky top-8">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-heading font-bold text-textPrimary">Filtres de Recherche</h3>
                        <button class="lg:hidden btn-secondary text-sm" onclick="toggleFilters()">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707v4.586a1 1 0 01-.293.707l-2 2A1 1 0 0110 21v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
                            </svg>
                        </button>
                    </div>

                    <div id="filters-content" class="space-y-6">
                        <!-- Quick Search -->
                        <div>
                            <label class="block text-sm font-semibold text-textPrimary mb-2">Recherche Rapide</label>
                            <div class="relative">
                                <input type="text" id="quick-search" placeholder="Nom, lieu, année..." class="input-field w-full pl-10" oninput="updateResults()" />
                                <svg class="absolute left-3 top-3 w-4 h-4 text-textSecondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                </svg>
                            </div>
                        </div>

                        <!-- Date Range -->
                        <div>
                            <label class="block text-sm font-semibold text-textPrimary mb-2">Période</label>
                            <div class="grid grid-cols-2 gap-2">
                                <div>
                                    <label class="block text-xs text-textSecondary mb-1">De</label>
                                    <input type="date" id="date-from" class="input-field w-full text-sm" value="2000-01-01" onchange="updateResults()" />
                                </div>
                                <div>
                                    <label class="block text-xs text-textSecondary mb-1">À</label>
                                    <input type="date" id="date-to" class="input-field w-full text-sm" value="2025-12-31" onchange="updateResults()" />
                                </div>
                            </div>
                        </div>

                        <!-- Geographic Filters -->
                        <div>
                            <label class="block text-sm font-semibold text-textPrimary mb-2">Localisation</label>
                            <div class="space-y-3">
                                <div>
                                    <label class="block text-xs text-textSecondary mb-1">Région</label>
                                    <select id="region-filter" class="input-field w-full text-sm" onchange="updateDepartments(); updateResults()">
                                        <option value>Toutes les régions</option>
                                        <option value="dakar">Dakar</option>
                                        <option value="thies">Thiès</option>
                                        <option value="diourbel">Diourbel</option>
                                        <option value="fatick">Fatick</option>
                                        <option value="kaolack">Kaolack</option>
                                        <option value="louga">Louga</option>
                                        <option value="matam">Matam</option>
                                        <option value="saint-louis">Saint-Louis</option>
                                        <option value="sedhiou">Sédhiou</option>
                                        <option value="tambacounda">Tambacounda</option>
                                        <option value="kedougou">Kédougou</option>
                                        <option value="kolda">Kolda</option>
                                        <option value="ziguinchor">Ziguinchor</option>
                                        <option value="kaffrine">Kaffrine</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs text-textSecondary mb-1">Département</label>
                                    <select id="department-filter" class="input-field w-full text-sm" onchange="updateCommunes(); updateResults()">
                                        <option value>Tous les départements</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs text-textSecondary mb-1">Commune</label>
                                    <select id="commune-filter" class="input-field w-full text-sm" onchange="updateResults()">
                                        <option value>Toutes les communes</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Election Type -->
                        <div>
                            <label class="block text-sm font-semibold text-textPrimary mb-2">Type d'Élection</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2 text-primary" value="presidentielle" onchange="updateResults()" />
                                    <span class="text-sm text-textSecondary">Présidentielle</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2 text-primary" value="legislative" onchange="updateResults()" />
                                    <span class="text-sm text-textSecondary">Législative</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2 text-primary" value="locale" onchange="updateResults()" />
                                    <span class="text-sm text-textSecondary">Locale</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2 text-primary" value="referendum" onchange="updateResults()" />
                                    <span class="text-sm text-textSecondary">Référendum</span>
                                </label>
                            </div>
                        </div>

                        <!-- Candidate Search -->
                        <div>
                            <label class="block text-sm font-semibold text-textPrimary mb-2">Candidat</label>
                            <div class="relative">
                                <input type="text" id="candidate-search" placeholder="Nom du candidat..." class="input-field w-full" oninput="showCandidateSuggestions(this.value); updateResults()" autocomplete="off" />
                                <div id="candidate-suggestions" class="absolute top-full left-0 right-0 bg-surface border border-border rounded-md shadow-card mt-1 hidden z-10 max-h-40 overflow-y-auto">
                                </div>
                            </div>
                        </div>

                        <!-- Advanced Filters -->
                        <div>
                            <button class="flex items-center justify-between w-full text-sm font-semibold text-textPrimary mb-2" onclick="toggleAdvancedFilters()">
                                <span>Filtres Avancés</span>
                                <svg id="advanced-arrow" class="w-4 h-4 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                            </button>
                            <div id="advanced-filters" class="hidden space-y-4">
                                <!-- Turnout Range -->
                                <div>
                                    <label class="block text-xs text-textSecondary mb-2">Taux de Participation (%)</label>
                                    <div class="grid grid-cols-2 gap-2">
                                        <input type="number" id="turnout-min" placeholder="Min" class="input-field w-full text-sm" min="0" max="100" onchange="updateResults()" />
                                        <input type="number" id="turnout-max" placeholder="Max" class="input-field w-full text-sm" min="0" max="100" onchange="updateResults()" />
                                    </div>
                                </div>

                                <!-- Victory Margin -->
                                <div>
                                    <label class="block text-xs text-textSecondary mb-2">Marge de Victoire (%)</label>
                                    <div class="grid grid-cols-2 gap-2">
                                        <input type="number" id="margin-min" placeholder="Min" class="input-field w-full text-sm" min="0" max="100" onchange="updateResults()" />
                                        <input type="number" id="margin-max" placeholder="Max" class="input-field w-full text-sm" min="0" max="100" onchange="updateResults()" />
                                    </div>
                                </div>

                                <!-- Document Type -->
                                <div>
                                    <label class="block text-xs text-textSecondary mb-2">Type de Document</label>
                                    <select id="document-type" class="input-field w-full text-sm" onchange="updateResults()">
                                        <option value>Tous les types</option>
                                        <option value="proces-verbal">Procès-verbal</option>
                                        <option value="rapport">Rapport officiel</option>
                                        <option value="statistiques">Statistiques</option>
                                        <option value="declaration">Déclaration</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Results Count -->
                        <div class="pt-4 border-t border-border">
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-textSecondary">Résultats trouvés:</span>
                                <span id="results-count" class="font-semibold text-primary">247</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Area -->
            <div class="lg:col-span-3">
                <!-- Results Header -->
                <div class="card p-4 mb-6">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
                        <div class="flex items-center space-x-4 mb-4 sm:mb-0">
                            <span class="text-sm text-textSecondary">Trier par:</span>
                            <select id="sort-by" class="input-field text-sm" onchange="sortResults()">
                                <option value="date-desc">Date (plus récent)</option>
                                <option value="date-asc">Date (plus ancien)</option>
                                <option value="location">Localisation</option>
                                <option value="turnout-desc">Participation (élevée)</option>
                                <option value="turnout-asc">Participation (faible)</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="btn-secondary flex items-center text-sm" onclick="exportResults()">
                                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                                Exporter
                            </button>
                            <div class="flex border border-border rounded-md">
                                <button id="table-view" class="px-3 py-2 text-sm bg-primary text-white rounded-l-md" onclick="switchView('table')">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0V4a1 1 0 011-1h3M3 20h18"/>
                                    </svg>
                                </button>
                                <button id="card-view" class="px-3 py-2 text-sm text-textSecondary hover:bg-gray-50 rounded-r-md" onclick="switchView('card')">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Results Table View -->
                <div id="table-results" class="card overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th class="cursor-pointer hover:bg-gray-100" onclick="sortTable('date')">
                                        <div class="flex items-center">
                                            Date
                                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"/>
                                            </svg>
                                        </div>
                                    </th>
                                    <th class="cursor-pointer hover:bg-gray-100" onclick="sortTable('type')">
                                        <div class="flex items-center">
                                            Type
                                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"/>
                                            </svg>
                                        </div>
                                    </th>
                                    <th class="cursor-pointer hover:bg-gray-100" onclick="sortTable('location')">
                                        <div class="flex items-center">
                                            Localisation
                                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"/>
                                            </svg>
                                        </div>
                                    </th>
                                    <th>Candidats Principaux</th>
                                    <th class="cursor-pointer hover:bg-gray-100" onclick="sortTable('turnout')">
                                        <div class="flex items-center">
                                            Participation
                                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"/>
                                            </svg>
                                        </div>
                                    </th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="results-tbody">
                                <!-- Election Result 1 -->
                                <tr class="hover:bg-gray-50 cursor-pointer" onclick="toggleRowDetails(this)">
                                    <td class="font-data">24/03/2024</td>
                                    <td>
                                        <span class="px-2 py-1 text-xs bg-primary-100 text-primary rounded-full">Présidentielle</span>
                                    </td>
                                    <td>Dakar, Plateau</td>
                                    <td>
                                        <div class="flex -space-x-1">
                                            <img src="https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?w=32&h=32&fit=crop&crop=face" alt="Candidat" class="w-6 h-6 rounded-full border-2 border-white" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <img src="https://images.pixabay.com/photo/2016/11/21/12/42/beard-1845166_960_720.jpg" alt="Candidat" class="w-6 h-6 rounded-full border-2 border-white" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <span class="w-6 h-6 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-xs text-textSecondary">+3</span>
                        </div>
                    </td>
                    <td>
                        <div class="flex items-center">
                            <span class="font-semibold text-textPrimary">76,28%</span>
                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                <div class="bg-secondary h-2 rounded-full" style="width: 76.28%"></div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="flex space-x-2">
                            <button class="text-primary hover:text-primary-700 p-1" onclick="event.stopPropagation(); viewDetails('2024-pres-dakar')" title="Voir détails">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                            </button>
                            <button class="text-secondary hover:text-secondary-700 p-1" onclick="event.stopPropagation(); downloadReport('2024-pres-dakar')" title="Télécharger rapport">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </button>
                            <button class="text-accent hover:text-accent-700 p-1" onclick="event.stopPropagation(); addToComparison('2024-pres-dakar')" title="Ajouter à la comparaison">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                            </button>
                        </div>
                    </td>
                </tr>
                <!-- Expandable Details Row -->
                <tr class="hidden bg-gray-50">
                    <td colspan="6" class="p-4">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div>
                                <h4 class="font-semibold text-textPrimary mb-2">Statistiques Détaillées</h4>
                                <ul class="space-y-1 text-textSecondary">
                                    <li>Inscrits: 1 247 892</li>
                                    <li>Votants: 951 847</li>
                                    <li>Bulletins valides: 943 521</li>
                                    <li>Bulletins nuls: 8 326</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-textPrimary mb-2">Résultats Principaux</h4>
                                <ul class="space-y-1 text-textSecondary">
                                    <li>Bassirou Diomaye Faye: 54,28%</li>
                                    <li>Amadou Ba: 35,79%</li>
                                    <li>Autres candidats: 9,93%</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-textPrimary mb-2">Documents</h4>
                                <ul class="space-y-1">
                                    <li><a href="javascript:void(0)" class="text-primary hover:text-primary-700">Procès-verbal officiel</a></li>
                                    <li><a href="javascript:void(0)" class="text-primary hover:text-primary-700">Statistiques détaillées</a></li>
                                    <li><a href="javascript:void(0)" class="text-primary hover:text-primary-700">Rapport de mission</a></li>
                                </ul>
                            </div>
                        </div>
                    </td>
                </tr>

                <!-- Election Result 2 -->
                <tr class="hover:bg-gray-50 cursor-pointer" onclick="toggleRowDetails(this)">
                    <td class="font-data">31/07/2022</td>
                    <td>
                        <span class="px-2 py-1 text-xs bg-secondary-100 text-secondary rounded-full">Législatives</span>
                    </td>
                    <td>Thiès, Thiès-Ville</td>
                    <td>
                        <div class="flex -space-x-1">
                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=32&h=32&fit=crop&crop=face" alt="Candidat" class="w-6 h-6 rounded-full border-2 border-white" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <img src="https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?w=32&h=32&fit=crop&crop=face" alt="Candidat" class="w-6 h-6 rounded-full border-2 border-white" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <span class="w-6 h-6 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-xs text-textSecondary">+4</span>
                        </div>
                    </td>
                    <td>
                        <div class="flex items-center">
                            <span class="font-semibold text-textPrimary">46,61%</span>
                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                <div class="bg-warning h-2 rounded-full" style="width: 46.61%"></div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="flex space-x-2">
                            <button class="text-primary hover:text-primary-700 p-1" onclick="event.stopPropagation(); viewDetails('2022-leg-thies')" title="Voir détails">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                            </button>
                            <button class="text-secondary hover:text-secondary-700 p-1" onclick="event.stopPropagation(); downloadReport('2022-leg-thies')" title="Télécharger rapport">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </button>
                            <button class="text-accent hover:text-accent-700 p-1" onclick="event.stopPropagation(); addToComparison('2022-leg-thies')" title="Ajouter à la comparaison">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                            </button>
                        </div>
                    </td>
                </tr>
                <!-- Expandable Details Row -->
                <tr class="hidden bg-gray-50">
                    <td colspan="6" class="p-4">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div>
                                <h4 class="font-semibold text-textPrimary mb-2">Statistiques Détaillées</h4>
                                <ul class="space-y-1 text-textSecondary">
                                    <li>Inscrits: 847 293</li>
                                    <li>Votants: 394 847</li>
                                    <li>Bulletins valides: 387 521</li>
                                    <li>Bulletins nuls: 7 326</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-textPrimary mb-2">Résultats Principaux</h4>
                                <ul class="space-y-1 text-textSecondary">
                                    <li>Benno Bokk Yakaar: 42,1%</li>
                                    <li>Yewwi Askan Wi: 31,8%</li>
                                    <li>Autres coalitions: 26,1%</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-textPrimary mb-2">Documents</h4>
                                <ul class="space-y-1">
                                    <li><a href="javascript:void(0)" class="text-primary hover:text-primary-700">Procès-verbal officiel</a></li>
                                    <li><a href="javascript:void(0)" class="text-primary hover:text-primary-700">Répartition des sièges</a></li>
                                </ul>
                            </div>
                        </div>
                    </td>
                </tr>

                <!-- Election Result 3 -->
                <tr class="hover:bg-gray-50 cursor-pointer" onclick="toggleRowDetails(this)">
                    <td class="font-data">23/01/2022</td>
                    <td>
                        <span class="px-2 py-1 text-xs bg-accent-100 text-accent rounded-full">Locales</span>
                    </td>
                    <td>Diourbel, Bambey</td>
                    <td>
                        <div class="flex -space-x-1">
                            <img src="https://images.pixabay.com/photo/2018/01/21/14/16/woman-3096664_960_720.jpg" alt="Candidat" class="w-6 h-6 rounded-full border-2 border-white" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=32&h=32&fit=crop&crop=face" alt="Candidat" class="w-6 h-6 rounded-full border-2 border-white" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            <span class="w-6 h-6 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-xs text-textSecondary">+2</span>
                        </div>
                    </td>
                    <td>
                        <div class="flex items-center">
                            <span class="font-semibold text-textPrimary">51,23%</span>
                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                <div class="bg-accent h-2 rounded-full" style="width: 51.23%"></div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="flex space-x-2">
                            <button class="text-primary hover:text-primary-700 p-1" onclick="event.stopPropagation(); viewDetails('2022-loc-bambey')" title="Voir détails">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                            </button>
                            <button class="text-secondary hover:text-secondary-700 p-1" onclick="event.stopPropagation(); downloadReport('2022-loc-bambey')" title="Télécharger rapport">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </button>
                            <button class="text-accent hover:text-accent-700 p-1" onclick="event.stopPropagation(); addToComparison('2022-loc-bambey')" title="Ajouter à la comparaison">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                            </button>
                        </div>
                    </td>
                </tr>
                <!-- Expandable Details Row -->
                <tr class="hidden bg-gray-50">
                    <td colspan="6" class="p-4">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <div>
                                <h4 class="font-semibold text-textPrimary mb-2">Statistiques Détaillées</h4>
                                <ul class="space-y-1 text-textSecondary">
                                    <li>Inscrits: 156 847</li>
                                    <li>Votants: 80 347</li>
                                    <li>Bulletins valides: 78 921</li>
                                    <li>Bulletins nuls: 1 426</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-textPrimary mb-2">Résultats Principaux</h4>
                                <ul class="space-y-1 text-textSecondary">
                                    <li>Liste Benno: 48,7%</li>
                                    <li>Liste Yewwi: 32,1%</li>
                                    <li>Autres listes: 19,2%</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-textPrimary mb-2">Documents</h4>
                                <ul class="space-y-1">
                                    <li><a href="javascript:void(0)" class="text-primary hover:text-primary-700">Procès-verbal officiel</a></li>
                                    <li><a href="javascript:void(0)" class="text-primary hover:text-primary-700">Composition du conseil</a></li>
                                </ul>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-between px-6 py-4 border-t border-border">
        <div class="text-sm text-textSecondary">
            Affichage de <span class="font-semibold">1</span> à <span class="font-semibold">10</span> sur <span class="font-semibold">247</span> résultats
        </div>
        <div class="flex space-x-2">
            <button class="px-3 py-2 text-sm border border-border rounded-md hover:bg-gray-50 disabled:opacity-50" disabled>
                Précédent
            </button>
            <button class="px-3 py-2 text-sm bg-primary text-white rounded-md">1</button>
            <button class="px-3 py-2 text-sm border border-border rounded-md hover:bg-gray-50">2</button>
            <button class="px-3 py-2 text-sm border border-border rounded-md hover:bg-gray-50">3</button>
            <span class="px-3 py-2 text-sm text-textSecondary">...</span>
            <button class="px-3 py-2 text-sm border border-border rounded-md hover:bg-gray-50">25</button>
            <button class="px-3 py-2 text-sm border border-border rounded-md hover:bg-gray-50">
                Suivant
            </button>
        </div>
    </div>
</div>

<!-- Card Results View (Hidden by default) -->
<div id="card-results" class="hidden grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Election Card 1 -->
    <div class="card p-6 hover:shadow-lg transition-smooth">
        <div class="flex items-start justify-between mb-4">
            <div>
                <div class="flex items-center space-x-2 mb-2">
                    <span class="px-2 py-1 text-xs bg-primary-100 text-primary rounded-full">Présidentielle</span>
                    <span class="text-sm text-textSecondary font-data">24/03/2024</span>
                </div>
                <h3 class="font-semibold text-textPrimary">Dakar, Plateau</h3>
            </div>
            <div class="flex space-x-1">
                <button class="text-primary hover:text-primary-700 p-1" title="Voir détails">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                </button>
                <button class="text-secondary hover:text-secondary-700 p-1" title="Télécharger">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <div class="mb-4">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm text-textSecondary">Participation</span>
                <span class="font-semibold text-textPrimary">76,28%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div class="bg-secondary h-2 rounded-full" style="width: 76.28%"></div>
            </div>
        </div>
        
        <div class="flex items-center justify-between">
            <div class="flex -space-x-1">
                <img src="https://images.pexels.com/photos/2379004/pexels-photo-2379004.jpeg?w=32&h=32&fit=crop&crop=face" alt="Candidat" class="w-8 h-8 rounded-full border-2 border-white" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                <img src="https://images.pixabay.com/photo/2016/11/21/12/42/beard-1845166_960_720.jpg" alt="Candidat" class="w-8 h-8 rounded-full border-2 border-white" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                <span class="w-8 h-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-xs text-textSecondary">+3</span>
            </div>
            <a href="election_results_detail.html" class="text-primary hover:text-primary-700 text-sm font-medium">Voir détails →</a>
        </div>
    </div>

    <!-- Election Card 2 -->
    <div class="card p-6 hover:shadow-lg transition-smooth">
        <div class="flex items-start justify-between mb-4">
            <div>
                <div class="flex items-center space-x-2 mb-2">
                    <span class="px-2 py-1 text-xs bg-secondary-100 text-secondary rounded-full">Législatives</span>
                    <span class="text-sm text-textSecondary font-data">31/07/2022</span>
                </div>
                <h3 class="font-semibold text-textPrimary">Thiès, Thiès-Ville</h3>
            </div>
            <div class="flex space-x-1">
                <button class="text-primary hover:text-primary-700 p-1" title="Voir détails">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                </button>
                <button class="text-secondary hover:text-secondary-700 p-1" title="Télécharger">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <div class="mb-4">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm text-textSecondary">Participation</span>
                <span class="font-semibold text-textPrimary">46,61%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div class="bg-warning h-2 rounded-full" style="width: 46.61%"></div>
            </div>
        </div>
        
        <div class="flex items-center justify-between">
            <div class="flex -space-x-1">
                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=32&h=32&fit=crop&crop=face" alt="Candidat" class="w-8 h-8 rounded-full border-2 border-white" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                <img src="https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?w=32&h=32&fit=crop&crop=face" alt="Candidat" class="w-8 h-8 rounded-full border-2 border-white" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                <span class="w-8 h-8 rounded-full bg-gray-200 border-2 border-white flex items-center justify-center text-xs text-textSecondary">+4</span>
            </div>
            <a href="election_results_detail.html" class="text-primary hover:text-primary-700 text-sm font-medium">Voir détails →</a>
        </div>
    </div>
</div>
</div>
</div>
</main>

<!-- Export Modal -->
<div id="export-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
    <div class="modal max-w-md w-full p-6">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-heading font-bold text-textPrimary">Exporter les Résultats</h3>
            <button onclick="closeExportModal()" class="text-textSecondary hover:text-textPrimary">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        
        <div class="space-y-4">
            <div>
                <label class="block text-sm font-semibold text-textPrimary mb-2">Format d'Export</label>
                <div class="space-y-2">
                    <label class="flex items-center">
                        <input type="radio" name="export-format" value="pdf" class="mr-2" checked />
                        <span class="text-sm text-textSecondary">PDF - Rapport complet</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="export-format" value="csv" class="mr-2" />
                        <span class="text-sm text-textSecondary">CSV - Données tabulaires</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="export-format" value="excel" class="mr-2" />
                        <span class="text-sm text-textSecondary">Excel - Feuille de calcul</span>
                    </label>
                </div>
            </div>
            
            <div>
                <label class="block text-sm font-semibold text-textPrimary mb-2">Contenu à Inclure</label>
                <div class="space-y-2">
                    <label class="flex items-center">
                        <input type="checkbox" class="mr-2" checked />
                        <span class="text-sm text-textSecondary">Résultats électoraux</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" class="mr-2" checked />
                        <span class="text-sm text-textSecondary">Statistiques de participation</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" class="mr-2" />
                        <span class="text-sm text-textSecondary">Informations des candidats</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" class="mr-2" />
                        <span class="text-sm text-textSecondary">Données géographiques</span>
                    </label>
                </div>
            </div>
        </div>
        
        <div class="flex space-x-3 mt-6">
            <button onclick="closeExportModal()" class="flex-1 btn-secondary">Annuler</button>
            <button onclick="performExport()" class="flex-1 btn-primary">Exporter</button>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="bg-surface border-t border-border mt-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
                <div class="flex items-center mb-4">
                    <svg class="h-8 w-8 text-primary mr-2" viewBox="0 0 40 40" fill="currentColor">
                        <rect x="2" y="8" width="36" height="24" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                        <rect x="6" y="12" width="8" height="4" fill="currentColor"/>
                        <rect x="16" y="12" width="8" height="4" fill="currentColor"/>
                        <rect x="26" y="12" width="8" height="4" fill="currentColor"/>
                        <rect x="6" y="18" width="28" height="2" fill="currentColor"/>
                        <rect x="6" y="22" width="20" height="2" fill="currentColor"/>
                        <circle cx="32" cy="23" r="2" fill="currentColor"/>
                    </svg>
                    <span class="font-heading font-bold text-textPrimary">Archives Électorales</span>
                </div>
                <p class="text-sm text-textSecondary">
                    Plateforme officielle des archives électorales de la République du Sénégal.
                </p>
            </div>
            
            <div>
                <h4 class="font-semibold text-textPrimary mb-4">Liens Utiles</h4>
                <ul class="space-y-2 text-sm text-textSecondary">
                    <li><a href="javascript:void(0)" class="hover:text-primary transition-micro">Commission Électorale</a></li>
                    <li><a href="javascript:void(0)" class="hover:text-primary transition-micro">Lois Électorales</a></li>
                    <li><a href="javascript:void(0)" class="hover:text-primary transition-micro">Guide d'Utilisation</a></li>
                    <li><a href="javascript:void(0)" class="hover:text-primary transition-micro">Contact</a></li>
                </ul>
            </div>
            
            <div>
                <h4 class="font-semibold text-textPrimary mb-4">Informations</h4>
                <ul class="space-y-2 text-sm text-textSecondary">
                    <li>République du Sénégal</li>
                    <li>Ministère de l'Intérieur</li>
                    <li>Direction Générale des Élections</li>
                    <li>© 2025 Tous droits réservés</li>
                </ul>
            </div>
        </div>
    </div>
</footer>

<script>
    // Mobile menu toggle
    function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        menu.classList.toggle('hidden');
    }

    // Toggle filters on mobile
    function toggleFilters() {
        const content = document.getElementById('filters-content');
        content.classList.toggle('hidden');
    }

    // Toggle advanced filters
    function toggleAdvancedFilters() {
        const filters = document.getElementById('advanced-filters');
        const arrow = document.getElementById('advanced-arrow');
        filters.classList.toggle('hidden');
        arrow.classList.toggle('rotate-180');
    }

    // Update departments based on region selection
    function updateDepartments() {
        const region = document.getElementById('region-filter').value;
        const departmentSelect = document.getElementById('department-filter');
        const communeSelect = document.getElementById('commune-filter');
        
        // Clear existing options
        departmentSelect.innerHTML = '<option value="">Tous les départements</option>';
        communeSelect.innerHTML = '<option value="">Toutes les communes</option>';
        
        // Mock department data
        const departments = {
            'dakar': ['Dakar', 'Guédiawaye', 'Pikine', 'Rufisque'],
            'thies': ['Thiès', 'Mbour', 'Tivaouane'],
            'diourbel': ['Diourbel', 'Bambey', 'Mbacké']
        };
        
        if (departments[region]) {
            departments[region].forEach(dept => {
                const option = document.createElement('option');
                option.value = dept.toLowerCase();
                option.textContent = dept;
                departmentSelect.appendChild(option);
            });
        }
    }

    // Update communes based on department selection
    function updateCommunes() {
        const department = document.getElementById('department-filter').value;
        const communeSelect = document.getElementById('commune-filter');
        
        // Clear existing options
        communeSelect.innerHTML = '<option value="">Toutes les communes</option>';
        
        // Mock commune data
        if (department) {
            const communes = ['Commune 1', 'Commune 2', 'Commune 3'];
            communes.forEach(commune => {
                const option = document.createElement('option');
                option.value = commune.toLowerCase().replace(' ', '-');
                option.textContent = commune;
                communeSelect.appendChild(option);
            });
        }
    }

    // Show candidate suggestions
    function showCandidateSuggestions(query) {
        const suggestions = document.getElementById('candidate-suggestions');
        
        if (query.length < 2) {
            suggestions.classList.add('hidden');
            return;
        }
        
        // Mock candidate data
        const candidates = [
            'Bassirou Diomaye Faye',
            'Amadou Ba',
            'Khalifa Sall',
            'Idrissa Seck',
            'Ousmane Sonko'
        ];
        
        const filtered = candidates.filter(name => 
            name.toLowerCase().includes(query.toLowerCase())
        );
        
        if (filtered.length > 0) {
            suggestions.innerHTML = filtered.map(name => 
                `<div class="px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm" onclick="selectCandidate('${name}')">${name}</div>`
            ).join('');
            suggestions.classList.remove('hidden');
        } else {
            suggestions.classList.add('hidden');
        }
    }

    // Select candidate from suggestions
    function selectCandidate(name) {
        document.getElementById('candidate-search').value = name;
        document.getElementById('candidate-suggestions').classList.add('hidden');
        updateResults();
    }

    // Update results based on filters
    function updateResults() {
        // Mock function to update results count
        const count = Math.floor(Math.random() * 500) + 50;
        document.getElementById('results-count').textContent = count;
        
        // Update applied filters
        updateAppliedFilters();
    }

    // Update applied filters display
    function updateAppliedFilters() {
        const appliedFilters = document.getElementById('applied-filters');
        const filterTags = document.getElementById('filter-tags');
        
        // Get active filters
        const filters = [];
        
        const quickSearch = document.getElementById('quick-search').value;
        if (quickSearch) filters.push({ label: `Recherche: "${quickSearch}"`, type: 'search' });
        
        const region = document.getElementById('region-filter').value;
        if (region) filters.push({ label: `Région: ${region}`, type: 'region' });
        
        const checkedTypes = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
            .map(cb => cb.value).filter(v => v);
        checkedTypes.forEach(type => {
            filters.push({ label: `Type: ${type}`, type: 'election-type' });
        });
        
        if (filters.length > 0) {
            filterTags.innerHTML = filters.map(filter => 
                `<span class="inline-flex items-center px-2 py-1 text-xs bg-primary-100 text-primary rounded-full">
                    ${filter.label}
                    <button onclick="removeFilter('${filter.type}')" class="ml-1 hover:text-primary-700">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </span>`
            ).join('');
            appliedFilters.classList.remove('hidden');
        } else {
            appliedFilters.classList.add('hidden');
        }
    }

    // Remove specific filter
    function removeFilter(type) {
        switch(type) {
            case 'search':
                document.getElementById('quick-search').value = '';
                break;
            case 'region':
                document.getElementById('region-filter').value = '';
                updateDepartments();
                break;
            case 'election-type':
                document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
                break;
        }
        updateResults();
    }

    // Clear all filters
    function clearAllFilters() {
        document.getElementById('quick-search').value = '';
        document.getElementById('region-filter').value = '';
        document.getElementById('department-filter').innerHTML = '<option value="">Tous les départements</option>';
        document.getElementById('commune-filter').innerHTML = '<option value="">Toutes les communes</option>';
        document.getElementById('candidate-search').value = '';
        document.getElementById('turnout-min').value = '';
        document.getElementById('turnout-max').value = '';
        document.getElementById('margin-min').value = '';
        document.getElementById('margin-max').value = '';
        document.getElementById('document-type').value = '';
        document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
        updateResults();
    }

    // Toggle row details
    function toggleRowDetails(row) {
        const nextRow = row.nextElementSibling;
        if (nextRow && nextRow.classList.contains('hidden')) {
            nextRow.classList.remove('hidden');
        } else if (nextRow) {
            nextRow.classList.add('hidden');
        }
    }

    // Switch between table and card view
    function switchView(view) {
        const tableView = document.getElementById('table-results');
        const cardView = document.getElementById('card-results');
        const tableBtn = document.getElementById('table-view');
        const cardBtn = document.getElementById('card-view');
        
        if (view === 'table') {
            tableView.classList.remove('hidden');
            cardView.classList.add('hidden');
            tableBtn.classList.add('bg-primary', 'text-white');
            tableBtn.classList.remove('text-textSecondary', 'hover:bg-gray-50');
            cardBtn.classList.remove('bg-primary', 'text-white');
            cardBtn.classList.add('text-textSecondary', 'hover:bg-gray-50');
        } else {
            tableView.classList.add('hidden');
            cardView.classList.remove('hidden');
            cardBtn.classList.add('bg-primary', 'text-white');
            cardBtn.classList.remove('text-textSecondary', 'hover:bg-gray-50');
            tableBtn.classList.remove('bg-primary', 'text-white');
            tableBtn.classList.add('text-textSecondary', 'hover:bg-gray-50');
        }
    }

    // Sort table
    function sortTable(column) {
        // Mock sorting functionality
        console.log('Sorting by:', column);
    }

    // Sort results
    function sortResults() {
        const sortBy = document.getElementById('sort-by').value;
        console.log('Sorting results by:', sortBy);
    }

    // View details
    function viewDetails(electionId) {
        window.location.href = 'election_results_detail.html';
    }

    // Download report
    function downloadReport(electionId) {
        console.log('Downloading report for:', electionId);
        // Mock download functionality
    }

    // Add to comparison
    function addToComparison(electionId) {
        console.log('Adding to comparison:', electionId);
        // Mock comparison functionality
    }

    // Export results
    function exportResults() {
        document.getElementById('export-modal').classList.remove('hidden');
    }

    // Close export modal
    function closeExportModal() {
        document.getElementById('export-modal').classList.add('hidden');
    }

    // Perform export
    function performExport() {
        const format = document.querySelector('input[name="export-format"]:checked').value;
        console.log('Exporting in format:', format);
        closeExportModal();
        // Mock export functionality
    }

    // Save search
    function saveSearch() {
        console.log('Saving current search configuration');
        // Mock save functionality
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
        updateResults();
        
        // Close candidate suggestions when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('#candidate-search') && !e.target.closest('#candidate-suggestions')) {
                document.getElementById('candidate-suggestions').classList.add('hidden');
            }
        });
    });
</script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>